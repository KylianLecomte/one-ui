<form (ngSubmit)="onSubmitAddNewTask()" [formGroup]="taskFg" class="mb-3">
  <input
    class="classic"
    formControlName="name"
    id="input-task-name"
    placeholder="Nom"
    type="text"
  />
  <textarea
    class="classic"
    formControlName="description"
    id="input-task-description"
    placeholder="Description"
    type="text"
  ></textarea>
  @for (frequencyRule of frequencyRules; track frequencyRule.id) {
    <one-task-frequency-rule [frequencyRule]="frequencyRule"></one-task-frequency-rule>
  }
  <one-tabs formGroupName="frequencyRuleFg">
    <one-tab [label]="Frequency.WEEKLY">
      <ng-template>
        <one-task-frequency-weekly [weeklyForm]="weeklyFg"></one-task-frequency-weekly>
      </ng-template>
    </one-tab>
    <one-tab [label]="Frequency.MONTHLY"><ng-template>MONTHLY</ng-template></one-tab>
    <one-tab [label]="Frequency.FIX"><ng-template>FIX</ng-template></one-tab>

    <div commonContent>
      <div class="ctn-start-frequency flex-row">
        <one-select
          [options]="START_FREQUENCY"
          formControlName="start"
          id="frequencyStart"
        ></one-select>

        <input class="classic" formControlName="startDate" type="date" />
      </div>

      <div class="ctn-end-frequency flex-row">
        <one-select [options]="END_FREQUENCY" formControlName="end" id="frequencyEnd"></one-select>

        @if (['Maintenant', 'Date'].includes(endFrequencyValue)) {
          <input class="classic" formControlName="endDate" type="date" />
        } @else if (["Nombre d'occurence"].includes(endFrequencyValue)) {
          <one-input-number
            [id]="'nbOccurence'"
            [labelIsHidden]="true"
            [label]="'Nombre d\'occurence'"
            formControlName="endNbOccurence"
          ></one-input-number>
        }
      </div>
    </div>
  </one-tabs>

  <one-button (click)="onAddFrequencyRule()">Ajouter la règle de répétition</one-button>
  <one-button type="submit">Ajouter</one-button>
</form>
